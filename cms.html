<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CMS Editor - RandomGuy CS 1.6 Server</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <h1>CMS Editor</h1>

  <label>
    Název serveru:
    <input type="text" id="serverNameInput" />
  </label>

  <label>
    IP serveru:
    <input type="text" id="ipInput" />
  </label>

  <label>
    Popis:
    <textarea id="descriptionInput" rows="5"></textarea>
  </label>

  <label>
    Pravidla (jedno na řádek):
    <textarea id="rulesInput" rows="5"></textarea>
  </label>

  <label>
    Email:
    <input type="text" id="emailInput" />
  </label>

  <label>
    Discord:
    <input type="text" id="discordInput" />
  </label>

  <button id="exportBtn">Exportovat JSON</button>

  <script>
    fetch('data.json')
      .then(res => res.json())
      .then(data => {
        document.getElementById('serverNameInput').value = data.serverName;
        document.getElementById('ipInput').value = data.ip;
        document.getElementById('descriptionInput').value = data.description;
        document.getElementById('rulesInput').value = data.rules.join('\n');
        document.getElementById('emailInput').value = data.contact.email;
        document.getElementById('discordInput').value = data.contact.discord;
      })
      .catch(() => {
        alert('Chyba při načítání dat.');
      });

    document.getElementById('exportBtn').onclick = () => {
      const data = {
        serverName: document.getElementById('serverNameInput').value,
        ip: document.getElementById('ipInput').value,
        description: document.getElementById('descriptionInput').value,
        rules: document.getElementById('rulesInput').value.split('\n').filter(line => line.trim() !== ''),
        contact: {
          email: document.getElementById('emailInput').value,
          discord: document.getElementById('discordInput').value
        }
      };

      const blob = new Blob([JSON.stringify(data, null, 2)], {type: 'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'data.json';
      a.click();
      URL.revokeObjectURL(url);
    };
  </script>
</body>
</html>
